[loggers]
keys=root, gunicorn.error, gunicorn.access

[handlers]
keys=console, access

[formatters]
keys=generic, access

[filters]
keys=ignore_healthz

[logger_root]
level=INFO
handlers=console

[logger_gunicorn.error]
level=INFO
handlers=console
propagate=0
qualname=gunicorn.error

[logger_gunicorn.access]
level=INFO
handlers=access
propagate=0
qualname=gunicorn.access

[handler_console]
class=StreamHandler
level=INFO
formatter=generic
args=(sys.stdout,)

[handler_access]
class=StreamHandler
level=INFO
formatter=access
args=(sys.stdout,)
filters=ignore_healthz

[formatter_generic]
format=%(asctime)s [%(process)d] [%(levelname)s] %(message)s

[formatter_access]
# 關鍵修正：Gunicorn 已經把 access line 格式化進 record.message
# 這裡必須用 %(message)s（不能用 %(h)s 等 atom），否則會噴 KeyError: 'h'
format=[ACC] %(message)s

[filter_ignore_healthz]
()=logfilter_v2.HealthzFilter
